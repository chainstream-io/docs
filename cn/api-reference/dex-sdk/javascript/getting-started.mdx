---
title: '快速开始'
description: 'JavaScript SDK 快速入门指南'
---

## 安装

```bash
npm install @chainstream-io/sdk
# or
yarn add @chainstream-io/sdk
```

## 初始化

### 基础用法

```javascript
import { ChainStreamClient } from '@chainstream-io/sdk';

// 使用静态 token 初始化客户端
const client = new ChainStreamClient('YOUR_ACCESS_TOKEN');
```

### 使用 TokenProvider（支持自动刷新 Token）

如果你的 token 会过期并需要自动刷新，可以传入一个 `TokenProvider` 对象：

```javascript
import { ChainStreamClient } from '@chainstream-io/sdk';

// 定义 TokenProvider
const tokenProvider = {
  getToken: async () => {
    // 在这里实现你的 token 获取/刷新逻辑
    // 例如：从缓存获取，如果过期则调用 API 刷新
    const token = await refreshTokenIfNeeded();
    return token;
  }
};

// 使用 TokenProvider 初始化
const client = new ChainStreamClient(tokenProvider);
```

<Note>
使用 `TokenProvider` 时，SDK 会在每次请求前调用 `getToken()` 方法获取最新的 token，适合需要自动刷新 token 的场景。
</Note>

### 配置选项

```javascript
const client = new ChainStreamClient('YOUR_ACCESS_TOKEN', {
  // 自定义 API 服务器地址（可选）
  serverUrl: 'https://api-dex.chainstream.io',
  // 自定义 WebSocket 服务器地址（可选）
  streamUrl: 'wss://realtime-dex.chainstream.io/connection/websocket',
  // 是否在初始化时自动连接 WebSocket（默认：false）
  autoConnectWebSocket: false
});
```

## 基础用例

### 仅使用 API（不需要 WebSocket）

如果你只需要调用 REST API 而不需要实时数据订阅，无需任何额外配置：

```javascript
const client = new ChainStreamClient('YOUR_ACCESS_TOKEN');

// 直接调用 API
const tokenInfo = await client.token.getToken({
  chain: 'sol',
  tokenAddress: '6p6xgHyF7AeE6TZkSmFsko444wqoP15icUSqi2jfGiPN'
});
```

### 使用 WebSocket 实时数据

如果需要使用 WebSocket 订阅实时数据：

```javascript
import { ChainStreamClient } from '@chainstream-io/sdk';
import { Resolution } from '@chainstream-io/sdk/openapi';

const client = new ChainStreamClient('YOUR_ACCESS_TOKEN');

// 直接订阅即可，SDK 会自动检测连接状态并建立连接
const subscription = client.stream.subscribeTokenCandles({
  chain: 'sol',
  tokenAddress: '6p6xgHyF7AeE6TZkSmFsko444wqoP15icUSqi2jfGiPN',
  resolution: Resolution._1m,
  callback: (candle) => {
    console.log('New candle:', candle);
  }
});

// 取消订阅
subscription.unsubscribe();
```

<Note>
调用 `subscribeXXX` 方法时，SDK 会自动检测 WebSocket 连接状态，如果未连接会自动建立连接，无需手动调用 `connect()`。
</Note>

**预连接（可选）**

如果需要在初始化时就预先建立 WebSocket 连接（例如减少首次订阅的延迟），可以设置 `autoConnectWebSocket: true`：

```javascript
const client = new ChainStreamClient('YOUR_ACCESS_TOKEN', {
  autoConnectWebSocket: true  // 初始化时立即建立 WebSocket 连接
});
```

## 配置参数说明

| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| `accessToken` | `string \| TokenProvider` | 是 | - | API 访问令牌或 TokenProvider 对象 |
| `options.serverUrl` | `string` | 否 | `https://api-dex.chainstream.io` | API 服务器地址 |
| `options.streamUrl` | `string` | 否 | `wss://realtime-dex.chainstream.io/connection/websocket` | WebSocket 服务器地址 |
| `options.autoConnectWebSocket` | `boolean` | 否 | `false` | 是否在初始化时自动连接 WebSocket |

### TokenProvider 接口

```typescript
interface TokenProvider {
  getToken(): Promise<string> | string;
}
```

## 下一步

- 查看 [API参考文档](./api-reference) 了解所有可用方法
- 了解 [WebSocket订阅](./websocket) 的实时数据功能